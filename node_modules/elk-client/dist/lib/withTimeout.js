"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var TimeoutError_1 = require("./errors/TimeoutError");
/**
 * Wraps a promise in a new promise that will reject if the promise is not
 * resolved or rejected within the timeout provided.
 */
function withTimeout(timeoutMs, promise) {
    if (timeoutMs < 1) {
        return promise;
    }
    return new Promise(function (resolve, reject) {
        var timeout = setTimeout(function () { return reject(new TimeoutError_1.default(timeoutMs)); }, timeoutMs);
        promise
            .then(function (result) {
            clearTimeout(timeout);
            resolve(result);
        })
            .catch(function (error) {
            clearTimeout(timeout);
            reject(error);
        });
    });
}
exports.default = withTimeout;
//# sourceMappingURL=withTimeout.js.map