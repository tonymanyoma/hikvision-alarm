"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Matches on a user-entered code.
 */
var USER_CODE_REGEX = /^(0\d)(0\d)(0\d)(0\d)(0\d)(0\d)$/;
var UserCode = /** @class */ (function () {
    function UserCode(code, isProximityCard) {
        if (isProximityCard === void 0) { isProximityCard = false; }
        this.code = code;
        this.isProximityCard = isProximityCard;
    }
    UserCode.decode = function (input) {
        var userCodeMatch = input.match(USER_CODE_REGEX);
        if (userCodeMatch) {
            // The regex match result contains the entire string as index 0,
            // and each match as index 1..7. Each of those will be preceded by
            // a zero, so exclude those "0" characters and join them to get the
            // code.
            return new UserCode(userCodeMatch
                .slice(1, 7)
                .map(function (char) { return char[1]; })
                .join(''), false);
        }
        else {
            return new UserCode(input, true);
        }
    };
    UserCode.prototype.encode = function (width) {
        if (width === void 0) { width = 12; }
        if (this.isProximityCard) {
            return this.code.padStart(width, '0');
        }
        return Array.from(this.code)
            .map(function (char) { return "0" + char; })
            .join('')
            .padStart(width, '0');
    };
    return UserCode;
}());
exports.default = UserCode;
//# sourceMappingURL=UserCode.js.map